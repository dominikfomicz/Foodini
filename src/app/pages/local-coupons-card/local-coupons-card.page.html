<ion-header no-border *ngIf="show === true">
	<ion-toolbar style="background-color:white; border-bottom: solid 1px #e6e6e6;">
		<ion-buttons slot="start" style="position: absolute;">
		  <!-- <ion-button size="small" shape="round" color="medium" (click)="notifications()">
			<ion-icon name="notifications"></ion-icon>
			<ion-badge color="dark" slot="end">2</ion-badge>
		  </ion-button> -->
		  <ion-back-button icon="ios-arrow-back" text="" defaultHref=""></ion-back-button>
		  <!-- <div class="titleicon">
			  <img src="assets/img/small.png">
		  </div> -->
		</ion-buttons>
		<ion-title class="ion-text-center">
			<ion-button shape="round" fill="clear" class="ion-align-self-center" size="medium" color="primary" (click)="alertLocation()">
				{{local_name}}
				<!-- <ion-icon style="margin-left:10px" name="pin"></ion-icon> -->
			</ion-button>
		</ion-title>
  	</ion-toolbar>
</ion-header>

<ion-content *ngIf="show === true" style="background-color:white">
	<!-- <ion-toolbar class="search">
		<ion-searchbar color="light" [(ngModel)]="searchTerm" (ionChange)="setFilteredItems()" placeholder="Znajdź kupon"></ion-searchbar>
	</ion-toolbar> -->
	<ion-card class="no-radius" style="background-color:white">
		<ion-item lines="none" *ngFor="let item of items" (click)="openCouponCard(item.coupon_id)" style="position: relative">
			<div style="position: absolute; top:20px; right:0px"><img src="http://repo.foodini.net.pl/storage/locals/{{id_local_data_main}}/logo.png" style="width:30px"></div>
			<ion-thumbnail slot="start">
				<img src="http://repo.foodini.net.pl/storage/coupons/{{ item.coupon_id }}/logo.svg">
			</ion-thumbnail>
			<ion-grid>
				<div *ngIf="item.coupon_left === -1" style="background-color:red; padding:7px; color:white; position: absolute; bottom:15px; right: 5px; font-size: 7px; font-weight: 400;border-radius: 5px;">Bez limitu</div>
				<div *ngIf="item.coupon_left > 0" style="background-color:red; padding:7px; color:white; position: absolute; bottom:10px; right: 5px; font-size: 10px; font-weight: bold; border-radius: 5px;">x{{ item.coupon_left }}</div>
				<ion-row>
					<ion-col class="ion-text-center" size="12">
						<ion-row class="title-company">
							<h4><b>{{ item.local_name }}</b></h4>
						</ion-row>
						<ion-row class="title-offer">
							<h4 color="primary"><b>{{ item.coupon_name }}</b></h4>
						</ion-row>
						<ion-row class="tags">
							<ion-col size="4" *ngFor="let tag of item.tags | keyvalue; let i = index">
								<div *ngIf="i === 0" style="background-color: #dcdfbd; color: #4e5133; padding:5px; font-size: 2vw; height: 4vh; display: flex; justify-content: center; align-items: center; text-align: center">
									{{tag.value.name}}
								</div>
								<div *ngIf="i === 1" style="background-color: #d1ddf7; color: #161c21; padding:5px; font-size: 2vw; height: 4vh; display: flex; justify-content: center; align-items: center; text-align: center">
									{{tag.value.name}}
								</div>
								<div *ngIf="i === 2" style="background-color: #f7c8c7; color: #513733; padding:5px; font-size: 2vw; height: 4vh; display: flex; justify-content: center; align-items: center; text-align: center">
									{{tag.value.name}}
								</div>
							</ion-col>
						</ion-row>
					</ion-col>
					<!-- <ion-col size="3" class="coupon-image">
						<ion-row>
							<img src="assets/img/icon.png">
						</ion-row>
					</ion-col> -->
				</ion-row>
				<ion-row>
					<ion-col>
						<ion-row class="info">
							<ion-col>
								<div style="color: green; font-size: 10px; padding-right: 6px; border-right: 1px solid #e3e3e3">
									Aktywny
								</div>
								<div style="display: flex; align-items: center; justify-content: flex-start; font-size:15px;">
									<ion-icon name="car" [ngClass]="{'active': item.delivery == true, '': item.delivery == false }"></ion-icon>
									<ion-icon name="restaurant" [ngClass]="{'active': item.eat_in_local == true, '': item.eat_in_local == false }" ></ion-icon>
									<ion-icon name="swap" [ngClass]="{'active': item.pick_up_local == true, '': item.pick_up_local == false }"></ion-icon>
								</div>
							</ion-col>
						</ion-row>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-item>
	</ion-card>
</ion-content>
<ion-footer padding *ngIf="show === true">
	<ion-grid>
		<ion-row class="cta">
			<ion-col size="6"><a href="tel:{{ phone_number }}"><ion-button expand="block" shape="square" size="default" color="secondary"><ion-icon color="primary" slot="start" name="call"></ion-icon><span style="color: #6a2c86">Zadzwoń</span></ion-button></a></ion-col>
			<ion-col size="6"><ion-button  expand="block" shape="square" size="default" color="primary" (click)="showMenu()"><ion-icon color="secondary" slot="end" name="bookmark"></ion-icon><span style="color: #ffd500">Pokaż menu</span></ion-button></ion-col>
		</ion-row>
	</ion-grid>
</ion-footer>
